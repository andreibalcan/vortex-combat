<p-panel header="Attendance">
	<div class="mt-5">
		<p-select
			[options]="workouts"
			[(ngModel)]="selectedWorkout"
			placeholder="Select a Workout"
			[showClear]="true"
		>
			<ng-template #selectedItem let-selectedWorkout>
				@if (selectedWorkout) {
					<div class="flex items-center gap-2">
						<div class="font-semibold text-sm self-center">
							{{ selectedWorkout?.description }}
						</div>
						<p-chip class="bg-primary">
							<span class="flex items-center justify-center">
								<i class="pi pi-calendar text-xs"></i>
							</span>
							<span class="text-xs">
								{{ selectedWorkout?.start }}
							</span>
						</p-chip>
						<p-chip class="bg-primary">
							<span class="flex items-center justify-center">
								<i class="pi pi-home text-xs"></i>
							</span>
							<span class="text-xs">
								{{ selectedWorkout?.room }}
							</span>
						</p-chip>
					</div>
				}
			</ng-template>

			<ng-template let-workout #item>
				<div class="flex items-center gap-2">
					<span class="text-sm self-center">{{
						workout?.description
					}}</span>
					<p-chip class="bg-primary">
						<span class="flex items-center justify-center">
							<i class="pi pi-calendar text-xs"></i>
						</span>
						<span class="text-xs">
							{{ workout?.start }}
						</span>
					</p-chip>
					<p-chip class="bg-primary">
						<span class="flex items-center justify-center">
							<i class="pi pi-home text-xs"></i>
						</span>
						<span class="text-xs">
							{{ workout?.room }}
						</span>
					</p-chip>
				</div>
			</ng-template>
		</p-select>
	</div>

	<div class="mt-15">
		<span class="text-m font-bold">Masters</span>
		<p-table
			[value]="masters"
			[(selection)]="selectedMasters"
			dataKey="id"
			class="min-w-[50rem]"
		>
			<ng-template #header>
				<tr>
					<th class="w-16"><p-tableHeaderCheckbox /></th>
					<th>Name</th>
					<th>Role</th>
					<th>Age</th>
					<th>Gender</th>
					<th>Belt</th>
				</tr>
			</ng-template>

			<ng-template #body let-master>
				<tr>
					<td><p-tableCheckbox [value]="master" /></td>
					<td>{{ master.name }}</td>
					<td>
						<p-badge
							[value]="
								master.hasTrainerCertificate
									? 'Primary'
									: 'Assistant'
							"
							[severity]="
								master.hasTrainerCertificate ? 'info' : 'danger'
							"
						></p-badge>
					</td>
					<td>{{ master.birthday | date }}</td>
					<td>{{ master.gender }}</td>
					<td>{{ master.belt?.color }} {{ master.belt?.degrees }}</td>
				</tr>
			</ng-template>

			<!-- Add this template for empty table -->
			<ng-template #emptymessage>
				<tr>
					<td colspan="6" class="text-sm text-center text-gray-500">
						No masters available...
					</td>
				</tr>
			</ng-template>
		</p-table>
	</div>

	<div class="mt-15">
		<span class="text-m font-bold">Students</span>
		<p-table
			[value]="students"
			[(selection)]="selectedStudents"
			dataKey="id"
			class="min-w-[50rem]"
		>
			<ng-template #header>
				<tr>
					<th class="w-16"><p-tableHeaderCheckbox /></th>
					<th>Name</th>
					<th>Age</th>
					<th>Gender</th>
					<th>Weight</th>
					<th>Height</th>
					<th>Enroll Date</th>
					<th>Belt</th>
				</tr>
			</ng-template>

			<ng-template #body let-student>
				<tr>
					<td><p-tableCheckbox [value]="student" /></td>
					<td>{{ student.name }}</td>
					<td>{{ student.birthday | date }}</td>
					<td>{{ student.gender }}</td>
					<td>{{ student.weight }} kg</td>
					<td>{{ student.height }} m</td>
					<td>{{ student.enrollDate | date }}</td>
					<td>
						{{ student.belt?.color }} {{ student.belt?.degrees }}
					</td>
				</tr>
			</ng-template>

			<!-- Empty template -->
			<ng-template #emptymessage>
				<tr>
					<td colspan="8" class="text-sm text-center text-gray-500">
						No students available...
					</td>
				</tr>
			</ng-template>
		</p-table>
	</div>

	<div class="mt-15">
		<p-button
			label="Submit Attendance"
			icon="pi pi-check"
			iconPos="right"
			(onClick)="submitAttendance()"
		/>
	</div>
</p-panel>

<div></div>
